webpackJsonp([1],{0:function(e,t,s){e.exports=s("NHnr")},"52zn":function(e,t,s){e.exports="img/am.2c8f522e.jpg"},"5qEl":function(e,t,s){e.exports="img/geo.f6c47d7f.jpg"},"9NiS":function(e,t){},G3BA:function(e,t){},Hj42:function(e,t){},JThr:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("/5sW"),a=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"card center"},[n("div",{staticClass:"row"},[n("div",{staticClass:"arm"},[n("img",{attrs:{src:s("52zn"),alt:"Armenian`s rull",title:"Лучшая нация"}})]),n("div",{staticClass:"text-content"},[n("h5",[e._v("Who Wins ?")])]),n("div",{staticClass:"geo"},[n("img",{attrs:{src:s("5qEl"),alt:"Georgian`s Suck",title:"Худшая нация"}})])]),n("div",{staticClass:"info"},[n("h6",[e._v("Created and Powerd  By Robert Aslanyan , jsut for fun and for testing some feauters")])])])}],i=s("XyMi");function o(e){s("osJZ")}var c=null,l=!1,u=o,m="data-v-6c5d46a3",d=null,f=Object(i["a"])(c,a,r,l,u,m,d),p=f.exports,h={components:{"app-header":p}},g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("app-header"),s("router-view")],1)},v=[];function _(e){s("G3BA")}var x=!1,C=_,b=null,w=null,F=Object(i["a"])(h,g,v,x,C,b,w),y=F.exports,k=(s("EuXz"),s("mJx5"),s("/ocq")),M=s("Sazm"),U=s.n(M),A=(s("3VHS"),s("wmKo")),j=s.n(A);n["a"].use(j.a);var E={apiKey:"AIzaSyCWwvlnk2RIlWDCh5c0O82Ds9ZytUsO2Pw",authDomain:"vue-chat-97b23.firebaseapp.com",databaseURL:"https://vue-chat-97b23.firebaseio.com",projectId:"vue-chat-97b23",storageBucket:"vue-chat-97b23.appspot.com",messagingSenderId:"1084147621171"};U.a.initializeApp(E);var N=U.a.firestore(),$={timestampsInSnapshots:!0};N.settings($);var I=U.a.firestore(),S=(s("VjuZ"),s("gbyG"),s("Gh7F"),s("MfeA"),s("9Yib"),s("A0n/"),s("fx22"),{MOUNTS:{0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"},MOUNTS_DAY:{1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat",0:"Sun"}}),D=S,T={_smile1:"&#x1F601;",_smile2:"&#x1F602;",_smile3:"&#x1F603;",_smile4:"&#x1F604;",_smile5:"&#x1F605;",_smile6:"&#x1F606;",_winking:"&#x1F609;",_tongue1:"&#x1F60B;",_tongue2:"&#x1F61D",_relived:"&#x1F60C;",_in_love:"&#x1F60D;",_smirking:"&#x1F60F;",_unamused:"&#x1F612;",_sweat:"&#x1F613;",_kiss:"&#x1F618;",_kissing:"&#x1F61A;",_winking_eye:"&#x1F61C;",_satisfied:"&#x1F60A;",_sad1:"&#x1F61E;",_sad2:"&#x1F614;",_sad3:"&#x1F623;",_sad4:"&#x1F625;",_sad5:"&#x1F630;",_sad6:"&#x1F629;",_scary1:"&#x1F628;",_scary2:"&#x1F631",_angry1:"&#x1F620;",_angry2:"&#x1F621;",_angry3:"&#x1F624;",_cry1:"&#x1F622;",_cry2:"&#x1F62D;",_sleepy:"&#x1F62A;",_tired:"&#x1F62B;",_shock1:"&#x1F632;",_shock2:"&#x1F633;",_shock3:"&#x1F635;",_face_mask:"&#x1F637;",_cat_smile1:"&#x1F638",_cat_smile2:"&#x1F639;",_cat_smile3:"&#x1F63A;",_cat_love:"&#x1F63B;",_cat_wry:"&#x1F63C;",_cat_kiss:"&#x1F63D;",_cat_angry:"&#x1F63E;",_cat_cry:"&#x1F63F;",_cat_shock:"&#x1F640;",_girl_face1:"&#x1F645;",_girl_face2:"&#x1F646;",_girl_face3:"&#x1F64B;",_girl_face4:"&#x1F64D;",_girl_face5:"&#x1F64E",_man1:"&#x1F647;",_mokey1:"&#x1F648;",_monkey2:"&#x1F649;",_monkey_3:"&#x1F64A;",_pray:"&#x1F64F;",_peace:"&#x270C;",_raised1:"&#x1F64C;",_raised2:"&#x270A;",_raised3:"&#x270B;",_clap:"&#x1F44F;",_open_hand:"&#x1F450;",_like:"&#x1F44D;",_unlike:"&#x1F44E;",_ok:"&#x1F44C;",_waving:"&#x1F44B;",_dam:"&#x1F44A;",_to_right_hand:"&#x1F449;",_to_left_hand:"&#x1F448;",_love1:"&#x1F493;",_love2:"&#x1F495;",_love3:"&#x1F496;",_broken_heart:"&#x1F494;",_poop:"&#x1F4A9",_dash:"&#x1F4A8;"},H=T;function P(e,t){var s=document.createElement(e);return t&&(s.className=t),s}function O(e){return document.querySelector(e)}function L(e){return document.querySelectorAll(e)}function V(e){return void 0==e}function Y(e,t){for(var s in e)if(Number(s)==t)return e[s]}var B=function(){var e=new Date;return{Handler:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2500,n=O(".error")||O(".success")?n:P("div",t?"error":"success");if(!V(n)){n.textContent=e;var a=O(".input-field");return a.insertAdjacentElement("afterend",n),setTimeout(function(){return n.remove()},s)}},scrollBottom:function(e){if(!V(e)&&!V(e.scrollHeight)&&!V(e.clientHeight))return e.scrollTop=e.scrollHeight},setCookie:function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name";e.setTime(e.getTime()+864e3),document.cookie="".concat(s,"=").concat(t,";path=/;expires=").concat(e.toGMTString())},validate:function(e){var t=/^([a-z]{4,16})$/i;return!!t.test(e)||(this.Handler("Login name can contain only letters with min 4 and  max 16 length",!0,2e3),!1)},passwordValidate:function(e){var t=/^(\w|\d){4,16}$/i;return!!t.test(e)||(this.Handler("Password  must be  min 4 and  max 16 length",!0,2e3),!1)},nameValidate:function(e){var t=/^(\w|\d){4,20}$/i;return!!t.test(e)||(this.Handler("Name must be  min 4 and  max 20 length ant can`t contain spaces ",!0,2e3),!1)},getFullDate:function(){var t=e.getDate(),s=e.getDay(),n=e.getMonth(),a=e.getFullYear();n=Y(D.MOUNTS,n),s=Y(D.MOUNTS_DAY,s);var r="".concat(s," ").concat(t," ").concat(n," ").concat(a);return r},getNow:function(){var e=new Date,t=e.getHours(),s=e.getMinutes(),n=e.getSeconds(),a="".concat(t,":").concat(s<10?"0"+s:s,":").concat(n<10?"0"+n:n,"\n                        ").concat(t>12?"PM":"AM");return{time:a,date:this.getFullDate()}},insertTo:function(e,t,s){e.appendChild(t),e.appendChild(s)},emojiParser:function(e){var t=/_\w+/gi,s=!0,n=!1,a=void 0;try{for(var r,i=e[Symbol.iterator]();!(s=(r=i.next()).done);s=!0){var o=r.value,c=o.textContent.trim(),l=c.match(t);if(t.test(c))for(var u in H)for(var m=0;m<l.length;m++)c.includes(l[m])&&u==l[m]&&(c=c.replace(l[m],H[u]),o.setAttribute("data-code",u),o.innerHTML=c)}}catch(e){n=!0,a=e}finally{try{s||null==i.return||i.return()}finally{if(n)throw a}}},setEmojis:function(e){for(var t in H){var s=P("span","emoji");s.innerHTML=H[t],s.setAttribute("title",t),e.appendChild(s)}},deleteEmojis:function(){var e=L(".emoji");V(e)||e.forEach(function(e){return e.remove()})},getEmojis:function(){var e=L(".emoji"),t=O(".main_input");e.forEach(function(e){e.addEventListener("click",function(){var s=e.textContent;return t.value+=s+" "})})}}},q=B(),J={data:function(){return{login_name:null,user_name:null,password:null,isSet:!1,sex:"male"}},computed:{isValid:function(){if(this.userNameValidate()&&this.loginValidate()&&this.passwordValidate())return!0}},methods:{userNameValidate:function(){return q.nameValidate(this.user_name)&&this.user_name},loginValidate:function(){return q.validate(this.login_name)&&this.login_name},passwordValidate:function(){return q.passwordValidate(this.password)&&this.password},addNewUser:function(){var e=this;if(this.isValid){var t=I.collection("users").doc(this.login_name.toLowerCase());t.get().then(function(s){s.exists?q.Handler("Such user is already exist"):t.set({user_name:e.user_name,password:e.password,sex:e.sex,permission:"guest"}).then(function(){return q.Handler("You successfuly registred!",!1)})})}else q.Handler("All fields must be full")}}},W=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"register"}},[s("h4",{staticClass:"center  amber-text text-darken-3"},[e._v("Register")]),s("hr"),s("form",{on:{submit:function(t){t.preventDefault(),e.addNewUser()}}},[s("div",{staticClass:"input-field"},[s("i",{staticClass:"material-icons prefix"},[e._v("account_circle")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user_name,expression:"user_name"}],staticClass:"icon_prefix reg-input",attrs:{type:"text",placeholder:"User name...",name:"name"},domProps:{value:e.user_name},on:{input:[function(t){t.target.composing||(e.user_name=t.target.value)},e.userNameValidate]}})]),s("hr"),s("div",{staticClass:"input-field"},[s("i",{staticClass:"material-icons prefix"},[e._v("assignment_ind")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.login_name,expression:"login_name"}],staticClass:"icon_prefix reg-input",attrs:{type:"text",placeholder:"Login name...",name:"login"},domProps:{value:e.login_name},on:{input:[function(t){t.target.composing||(e.login_name=t.target.value)},e.loginValidate]}})]),s("div",{staticClass:"input-field"},[s("i",{staticClass:"material-icons prefix"},[e._v("beenhere")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"reg-input",attrs:{type:"password",placeholder:"Password..."},domProps:{value:e.password},on:{input:[function(t){t.target.composing||(e.password=t.target.value)},e.passwordValidate]}})]),s("div",{staticClass:"row"},[s("p",[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.sex,expression:"sex"}],staticClass:"with-gap",attrs:{name:"sex",type:"radio",value:"male"},domProps:{checked:e._q(e.sex,"male")},on:{change:function(t){e.sex="male"}}}),s("span",[e._v("Male")])])]),s("p",[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.sex,expression:"sex"}],staticClass:"with-gap",attrs:{name:"sex",type:"radio",value:"female"},domProps:{checked:e._q(e.sex,"female")},on:{change:function(t){e.sex="female"}}}),s("span",[e._v("Female")])])])]),s("div",{staticClass:"input-group"},[s("input",{staticClass:"btn reg-btn amber darken-3",attrs:{type:"submit",value:"register"}}),e._t("default")],2)])])},G=[];function R(e){s("ZU57")}var z=!1,Z=R,K=null,X=null,Q=Object(i["a"])(J,W,G,z,Z,K,X),ee=Q.exports,te={name:"app",data:function(){return{name:null,password:null}},firestore:function(){return{chats:I.collection("chats")}},methods:{startChat:function(){var e=this;if(this.name&&this.password){var t=I.collection("users").doc(this.name.toLowerCase());t.get().then(function(t){var s=t.exists?t.data().password:null;if(t.exists&&e.password===s)return q.setCookie(e.name.toLowerCase()),e.$router.push({name:"chat",params:{name:e.name}});q.Handler("Wrong username or password")})}}}},se=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("h4",{staticClass:"center  green-text text-darken-1"},[e._v("Welcome")]),s("hr"),s("form",{on:{submit:function(t){t.preventDefault(),e.startChat()}}},[s("div",{staticClass:"input-field"},[s("i",{staticClass:"material-icons prefix"},[e._v("assignment_ind")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"icon_prefix",attrs:{type:"text",placeholder:"Login name...",name:"name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),s("div",{staticClass:"input-field"},[s("i",{staticClass:"material-icons prefix"},[e._v("beenhere")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"Password..."},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),s("div",{staticClass:"input-group"},[s("input",{staticClass:"btn green lighten-1 log-btn",attrs:{type:"submit",value:"Ready"}}),e._t("default")],2)])])},ne=[];function ae(e){s("9NiS")}var re=!1,ie=ae,oe="data-v-3a4799f7",ce=null,le=Object(i["a"])(te,se,ne,re,ie,oe,ce),ue=le.exports,me={name:"app",components:{Register:ee,Login:ue},data:function(){return{register:!1}},mounted:function(){var e=document.querySelector(".time-up");e&&void 0!==e&&setTimeout(function(){return e.remove()},2e3)},computed:{message:function(){var e=this.$route.params.message;if(void 0!==e)return this.$route.params.message}},beforeCreate:function(){var e=document.cookie;""!==e&&this.$router.push({name:"chat"})}},de=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container",attrs:{id:"app"}},[void 0!==e.message?s("div",{staticClass:"error time-up"},[e._v("\n    "+e._s(e.message)+"\n  ")]):e._e(),s("keep-alive",[e.register?e._e():s("login",{tag:"component"},[s("input",{staticClass:"btn green darken-1",attrs:{type:"button",value:"sign in"},on:{click:function(t){e.register=!e.register}}})])],1),s("keep-alive",[e.register?s("register",{tag:"component"},[s("input",{staticClass:"btn amber darken-1",attrs:{type:"button",value:"log in"},on:{click:function(t){e.register=!e.register}}})]):e._e()],1)],1)},fe=[];function pe(e){s("R3lu")}var he=!1,ge=pe,ve="data-v-5a465ba8",_e=null,xe=Object(i["a"])(me,de,fe,he,ge,ve,_e),Ce=xe.exports,be={name:"home",components:{StartScreen:Ce}},we=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home"},[s("start-screen")],1)},Fe=[],ye=!1,ke=null,Me=null,Ue=null,Ae=Object(i["a"])(be,we,Fe,ye,ke,Me,Ue),je=Ae.exports,Ee={data:function(){return{emojisShow:!1}},methods:{emojiParse:function(){return this.emojisShow=!this.emojisShow,this.emojisShow?(q.setEmojis(this.$refs["emoji_content"]),q.getEmojis()):q.deleteEmojis()}}},Ne=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"emoji_main"},[s("i",{staticClass:"material-icons prefix emoji_btn",on:{click:e.emojiParse}},[e._v("sentiment_very_satisfied")]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.emojisShow,expression:"emojisShow"}],ref:"emoji_content",staticClass:"emoji_content"})])},$e=[];function Ie(e){s("Hj42")}var Se=!1,De=Ie,Te=null,He=null,Pe=Object(i["a"])(Ee,Ne,$e,Se,De,Te,He),Oe=Pe.exports,Le={props:["content","issetMessage"],components:{Emoji:Oe},data:function(){return{text:null,maxTextLenght:100}},computed:{name:function(){return this.$store.getters.getUser.user_name},length:function(){return this.text?this.text.length:0}},methods:{scroll:function(){return q.scrollBottom(this.content)},textLength:function(e){return this.length>=this.maxTextLenght?(q.Handler("Text max length can be ".concat(this.maxTextLenght)),this.text=this.text.slice(0,this.maxTextLenght)):this.text},addMessage:function(){var e=/^[^\s]+/,t=document.querySelector(".main_input");this.text=""===t.value?this.text:t.value;var s={text:this.text,name:this.name,createdAt:Date.now(),date:q.getNow()};this.textLength()&&e.test(this.text)?(I.collection("messages").add(s),this.scroll(),this.text=""):q.Handler("Invalid Value:Field must not be empty , and can`t start and end with space!")},deleteAllData:function(){var e=I.collection("messages").where("name","==",this.name);e.get().then(function(e){e.forEach(function(e){return e.ref.delete(),q.Handler("Your messages was deleted !",!1)})})}}},Ve=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("form",{on:{submit:function(t){t.preventDefault(),e.addMessage()}}},[s("div",{staticClass:"input-field flex-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"}],staticClass:"main_input",attrs:{type:"text",placeholder:"Your Message..."},domProps:{value:e.text},on:{focus:e.scroll,input:[function(t){t.target.composing||(e.text=t.target.value)},e.textLength]}}),s("emoji")],1),s("div",{staticClass:"btn-group"},[s("button",{staticClass:"submit btn green button",attrs:{type:"submit"}},[e._v("\n              Send Message\n              "),s("i",{staticClass:"material-icons prefix"},[e._v("send")]),s("span",{staticClass:"max-text"},[e._v(e._s(e.length)+"/100")])]),s("button",{staticClass:"delete btn red button",attrs:{type:"button",disabled:0==e.issetMessage},on:{click:function(t){e.deleteAllData()}}},[e._v("Delete message\n              "),s("i",{staticClass:"material-icons prefix"},[e._v("delete")])])])])])},Ye=[];function Be(e){s("NImH")}var qe=!1,Je=Be,We=null,Ge=null,Re=Object(i["a"])(Le,Ve,Ye,qe,Je,We,Ge),ze=Re.exports,Ze={data:function(){return{isClose:!0,show:!1,newName:null,collapsed:!1}},computed:{isAdmin:function(){var e=this.$store.getters.getUser.permission;if("admin"===e)return!0},name:function(){return this.$store.getters.getUser.user_name},gender:function(){return this.$store.getters.getUser.gender},chatInfo:function(){return{users:this.$store.getters.getUsers,usersInChat:this.$store.getters.getUsersInChat,userMessages:this.$store.getters.getUserMessages,usersMessages:this.$store.getters.getUsersMessages}}},methods:{validate:function(){return q.validate(this.newName)},collapse:function(e){var t=e.target.nextSibling;if(t){var s=window.getComputedStyle(t).display;"none"==s?(t.style.display="flex",this.collapsed=!0):(t.style.display="none",this.collapsed=!1)}},logOut:function(){document.cookie="name=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",location.replace("/")},deleteData:function(){return q.deleteAllData(this.counts.allMessage)}}},Ke=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("div",{staticClass:"btn-group collapse"},[s("div",{staticClass:"collapse-btn",on:{click:e.collapse}},[e._v(" View "+e._s(e.collapsed?"Less":"More"))]),s("div",{staticClass:"collapsed"},[s("button",{staticClass:"btn amber darken-2 button",attrs:{type:"button"},on:{click:e.logOut}},[s("i",{staticClass:"material-icons prefix",attrs:{title:"Change User Name"}},[e._v("subdirectory_arrow_left")]),e._v("\n                  Log out\n              ")]),s("button",{staticClass:"btn indigo lighten-1 button",attrs:{type:"button"},on:{click:function(t){e.show=!e.show}}},[e._v(" \n                      Chat Info\n                      "),s("i",{staticClass:"material-icons prefix",attrs:{title:"More info"}},[e._v("\n                          "+e._s(e.show?"arrow_drop_up":"arrow_drop_down")+"\n                      ")])]),e.isAdmin?s("button",{staticClass:"btn button",attrs:{type:"button"}},[s("router-link",{attrs:{to:{name:"admin",params:{isAdmin:e.isAdmin}}}},[e._v(" Admin Panel")]),s("i",{staticClass:"material-icons prefix"},[e._v("account_box")])],1):e._e()])]),s("transition",{attrs:{name:"bounce"}},[e.show?s("div",{staticClass:"chat-info"},[s("ul",[s("li",[s("span",{staticClass:"name-header"},[e._v("Your User Name: "),s("strong",[e._v(e._s(e.name))])])]),s("li",[s("span",[e._v("Your Gender: "),s("strong",[e._v(e._s(e.gender))])])]),s("li",[s("span",[e._v("Your Message Count: "),s("strong",[e._v(e._s(e.chatInfo.userMessages))])])])]),s("ul",[s("li",[s("span",[e._v("All Messages Count: "),s("strong",[e._v(e._s(e.chatInfo.usersMessages))])])]),s("li",[s("span",[e._v("Users In Chat: "),s("strong",[e._v(e._s(e.chatInfo.usersInChat))])])]),s("li",[s("span",[e._v("Users : "),s("strong",[e._v(e._s(e.chatInfo.users))])])])]),s("span",{staticClass:"version"},[e._v("Version:2.4.1")])]):e._e()])],1)},Xe=[];function Qe(e){s("yMcY")}var et=!1,tt=Qe,st=null,nt=null,at=Object(i["a"])(Ze,Ke,Xe,et,tt,st,nt),rt=at.exports,it={components:{NewMessage:ze,ChangeName:rt},data:function(){return{name:document.cookie.split("=")[1]}},firestore:function(){return{chats:I.collection("messages").orderBy("createdAt")}},computed:{userInfo:function(){return{userName:this.$store.getters.getUser.user_name,gender:this.$store.getters.getUser.gender}},message:function(){var e=this.$route.params.message;if(void 0!==e)return this.$route.params.message}},methods:{deleteData:function(e){var t=this,s=e.target;if("current"==s.classList[0]){var n=s.childNodes[3],a=(s.firstChild.value,n.textContent),r=I.collection("messages");r.get().then(function(e){e.forEach(function(e){var s=e.data().name,n=e.data().text;a===n&&s===t.userInfo.userName&&(q.Handler("Your Message was deleted!",!1,2e3),e.ref.delete())})})}}},updated:function(){this.$store.dispatch("getAllInfo");var e=document.querySelectorAll(".message"),t=/(https?:)?(\/\/)?(w{3}\.)?(\w{2,19}\.)(\w{1,12}(\.\w+)?)\/*\S+/gi;e.forEach(function(e){var s=e.textContent,n=s.match(t);if(s.match(t)){var a=e.textContent;n.forEach(function(t,s,n){var r=t.includes("http","https"),i='<a href="'.concat(r?t:"http://"+t,'" target="_blank">').concat(t,"</a>");n.indexOf(t)===s&&(a=a.replace(t,i),e.innerHTML=a)})}}),q.emojiParser(e)},mounted:function(){var e=document.querySelector(".success");e&&void 0!==e&&setTimeout(function(){return e.remove()},2e3),""===document.cookie&&this.$router.push({name:"main",params:{message:"Time is up"}})},beforeMount:function(){this.$store.dispatch("setUser")}},ot=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("div",{staticClass:"card"},[void 0!==e.message?s("div",{staticClass:"success"},[e._v("\n\t\t\t"+e._s(e.message)+"\n\t\t")]):e._e(),s("div",{staticClass:"card-action"},[s("h4",{staticClass:"center orange-text text-darken-3"},[e._v("Aslanyan`s Chat")]),s("hr"),s("change-name"),s("div",{ref:"content",staticClass:"card-content"},[s("span"),s("ul",{staticClass:"messages"},e._l(e.chats,function(t,n){return s("li",{key:n,class:e.userInfo.userName==t.name?"current delete":"another",on:{click:function(t){return t.target!==t.currentTarget?null:e.deleteData(t)}}},[e.userInfo.userName==t.name?s("input",{attrs:{type:"hidden",name:"hidden_name"},domProps:{value:t.name}}):e._e(),s("span",{staticClass:"name"},[e._v(e._s(e.userInfo.userName==t.name?"You":t.name))]),e.userInfo.userName!==t.name?s("span",{class:"sex "+e.userInfo.gender},[e._v(e._s("male"===e.userInfo.gender?"♂":"♀"))]):e._e(),s("p",{ref:"input",refInFor:!0,staticClass:"message aqua-text"},[e._v(e._s(t.text))]),s("span",{staticClass:"time"},[e._v(e._s(t.date.time))]),s("span",{staticClass:"date"},[e._v(e._s(t.date.date))])])}))]),s("new-message",{attrs:{content:this.$refs["content"]}})],1)])])},ct=[];function lt(e){s("JThr")}var ut=!1,mt=lt,dt="data-v-58b68ed0",ft=null,pt=Object(i["a"])(it,ot,ct,ut,mt,dt,ft),ht=pt.exports,gt={data:function(){return{users:[],hasMessages:this.$store.getters.getUsersMessages>0}},methods:{deleteUser:function(e,t){var s=this,n=I.collection("messages"),a=I.collection("users");confirm("Delete this user ?")&&(n.get().then(function(e){e.empty||e.forEach(function(e){if(e.data().name===t)return e.ref.delete()})}),a.doc(e).delete().then(function(){s.$router.push({name:"chat",params:{message:"The user with login name ".concat(e," was deleted !")}})}))},deleteAllData:function(){var e=this;confirm("Delete all messages ?")&&I.collection("messages").get().then(function(e){e.forEach(function(e){e.ref.delete()})}).then(function(){return e.$router.push({name:"chat",params:{message:"All messages was deleted"}})})}},mounted:function(){var e=this,t=I.collection("users").orderBy("user_name");t.get().then(function(t){t.forEach(function(t){var s=t.id,n=t.data().user_name,a=t.data().permission,r=t.data().sex;e.users.push({id:s,name:n,permission:a,gender:r})})})},beforeUpdate:function(){console.log(this.$store.getters.getUsers),""===document.cookie&&this.$router.push({name:"main",params:{message:"Time is up"}})}},vt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-action"},[s("router-link",{attrs:{to:{name:"chat"}}},[s("button",{staticClass:"btn blue darken-2"},[s("i",{staticClass:"material-icons prefix"},[e._v("arrow_back")])])]),s("h2",{staticClass:"center cyan-text text-darken-2"},[e._v("Admin Panel")]),s("hr"),s("table",{staticClass:"striped responsive-table"},[e._m(0),s("tbody",e._l(e.users,function(t){return s("tr",[s("th",[e._v(e._s(t.id))]),s("th",[e._v(e._s(t.name))]),s("th",[e._v(e._s(t.gender))]),s("th",[e._v(e._s(t.permission))]),s("th",[s("button",{staticClass:"btn red",attrs:{disabled:"admin"===t.permission},on:{click:function(s){e.deleteUser(t.id,t.name)}}},[e._v("\n                                Delete\n                            ")])])])}))]),s("button",{staticClass:"btn red darken-4 button delete-msgs",attrs:{disabled:!e.hasMessages},on:{click:e.deleteAllData}},[s("i",{staticClass:"material-icons prefix"},[e._v("delete")]),e._v("\n                 Delete All Messages\n            ")])],1)])])},_t=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("ID")]),s("th",[e._v("User Name")]),s("th",[e._v("Gender")]),s("th",[e._v("Permission")]),s("th",[e._v("Delete User")])])])}];function xt(e){s("W6cP")}var Ct=!1,bt=xt,wt=null,Ft=null,yt=Object(i["a"])(gt,vt,_t,Ct,bt,wt,Ft),kt=yt.exports,Mt={components:{AdminPanel:kt}},Ut=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("admin-panel")},At=[];function jt(e){s("xcCg")}var Et=!1,Nt=jt,$t=null,It=null,St=Object(i["a"])(Mt,Ut,At,Et,Nt,$t,It),Dt=St.exports;n["a"].use(k["a"]);var Tt=new k["a"]({mode:"history",routes:[{path:"/",name:"main",component:je},{path:"/chat",name:"chat",component:ht,props:!0,beforeEnter:function(e,t,s){var n=document.cookie.split("=")[1],a=e.params.name;return a=n,void 0===a&&s({path:"/"}),a?s():s({path:"/"})}},{path:"/chat/admin",name:"admin",component:Dt,beforeEnter:function(e,t,s){var n=e.params.isAdmin;return void 0!==n&&n||s({path:"/"}),s()}}]}),Ht=s("NYxO");n["a"].use(Ht["a"]);var Pt=new Ht["a"].Store({state:{userInfo:{},users:0,usersMessagesCount:0,userMessagesCount:0,usersInChat:0},actions:{setUser:function(e){e.commit("setUser")},setAllMessages:function(e){e.commit("getAllUsersMessages")},setUserMessages:function(e){e.commit("getUserMessages")},setUsersInChat:function(e){e.commit("getUsersInChat")},setUsers:function(e){e.commit("getAllUsers")},getAllInfo:function(e){e.commit("getAllUsersMessages"),e.commit("getUserMessages"),e.commit("getUsersInChat"),e.commit("getAllUsers")}},mutations:{setUser:function(e,t){var s=document.cookie.split("=")[1];I.collection("users").doc(s).get().then(function(t){var s={login_name:t.id,user_name:t.data().user_name,permission:t.data().permission,gender:t.data().sex};return e.userInfo=s})},getAllUsersMessages:function(e){I.collection("messages").get().then(function(t){if(!t.empty){var s=[];return t.forEach(function(e){return s.push(e.ref.id)}),e.usersMessagesCount=s.length}})},getUserMessages:function(e){var t=this;I.collection("messages").get().then(function(s){var n=[];return s.forEach(function(s){if(s.data().name==e.userInfo.user_name)return n.push(t.name)}),e.userMessagesCount=n.length})},getUsersInChat:function(e){I.collection("messages").get().then(function(t){var s=[];return t.forEach(function(e){return s.push(e.data().name)}),s=s.filter(function(e,t,s){return s.indexOf(e)==t}),e.usersInChat=s.length})},getAllUsers:function(e){I.collection("users").get().then(function(t){var s=[];return t.empty||t.forEach(function(e){return s.push(e.id)}),e.users=s.length})}},getters:{getUser:function(e){return e.userInfo},getUsersMessages:function(e){return e.usersMessagesCount},getUserMessages:function(e){return e.userMessagesCount},getUsersInChat:function(e){return e.usersInChat},getUsers:function(e){return e.users}}}),Ot=Pt;n["a"].config.productionTip=!1,new n["a"]({store:Ot,router:Tt,render:function(e){return e(y)}}).$mount("#app")},NImH:function(e,t){},R3lu:function(e,t){},W6cP:function(e,t){},ZU57:function(e,t){},osJZ:function(e,t){},xcCg:function(e,t){},yMcY:function(e,t){}},[0]);
//# sourceMappingURL=app.3ba3ea28.js.map