webpackJsonp([1],{0:function(t,e,n){t.exports=n("NHnr")},"52zn":function(t,e,n){t.exports="img/am.2c8f522e.jpg"},"5qEl":function(t,e,n){t.exports="img/geo.f6c47d7f.jpg"},FakA:function(t,e){},G3BA:function(t,e){},HQqO:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("/5sW"),s=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"card center"},[a("div",{staticClass:"row"},[a("div",{staticClass:"arm"},[a("img",{attrs:{src:n("52zn"),alt:"Armenian`s rull",title:"Лучшая нация"}})]),a("div",{staticClass:"text-content"},[a("h5",[t._v("Who Wins ?")])]),a("div",{staticClass:"geo"},[a("img",{attrs:{src:n("5qEl"),alt:"Georgian`s Suck",title:"Худшая нация"}})])]),a("div",{staticClass:"info"},[a("h6",[t._v("Created and Powerd  By Robert Aslanyan , jsut for fun and for testing some feauters")])])])}],r=n("XyMi");function o(t){n("osJZ")}var c=null,l=!1,u=o,d="data-v-6c5d46a3",m=null,f=Object(r["a"])(c,s,i,l,u,d,m),h=f.exports,p={components:{"app-header":h}},v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("app-header"),n("router-view")],1)},g=[];function C(t){n("G3BA")}var _=!1,b=C,x=null,w=null,y=Object(r["a"])(p,v,g,_,b,x,w),N=y.exports,M=(n("EuXz"),n("mJx5"),n("/ocq")),A=n("Sazm"),D=n.n(A),k=(n("3VHS"),n("wmKo")),E=n.n(k);a["a"].use(E.a);var O={apiKey:"AIzaSyCWwvlnk2RIlWDCh5c0O82Ds9ZytUsO2Pw",authDomain:"vue-chat-97b23.firebaseapp.com",databaseURL:"https://vue-chat-97b23.firebaseio.com",projectId:"vue-chat-97b23",storageBucket:"vue-chat-97b23.appspot.com",messagingSenderId:"1084147621171"};D.a.initializeApp(O);var S=D.a.firestore(),T={timestampsInSnapshots:!0};S.settings(T);var H=D.a.firestore(),I={MOUNTS:{0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"},MOUNTS_DAY:{1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat",7:"Sun"}},j=I;function $(t,e){var n=document.createElement(t);return e&&(n.className=e),n}function Y(t){return document.querySelector(t)}function U(t){return void 0==t}function q(t,e){for(var n in t)if(Number(n)==e)return t[n]}var z=function(){var t=new Date;return{Handler:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2500,a=Y(".error")||Y(".success")?a:$("div",e?"error":"success");if(!U(a)){a.textContent=t;var s=Y('input[type="text"]');return s.insertAdjacentElement("afterend",a),setTimeout(function(){return a.remove()},n)}},scrollBottom:function(t){if(!U(t)&&!U(t.scrollHeight)&&!U(t.clientHeight))return t.scrollTop=t.scrollHeight},setCookie:function(e){t.setTime(t.getTime()+864e3),document.cookie="name=".concat(e,";path=/;expires=").concat(t.toGMTString())},validate:function(t){var e=/^([a-z]{4,16})$/i;return!!e.test(t)||(this.Handler("Inavlid name. Name can contain only letters with min 4 and  max 16 length",!0,1500),!1)},getFullDate:function(){var e=t.getDate(),n=t.getDay(),a=t.getMonth(),s=t.getFullYear();a=q(j.MOUNTS,a),n=q(j.MOUNTS_DAY,n);var i="".concat(n," ").concat(e," ").concat(a," ").concat(s);return i},getNow:function(){var t=new Date,e=t.getHours(),n=t.getMinutes(),a=t.getSeconds(),s="".concat(e,":").concat(n<10?"0"+n:n,":").concat(a<10?"0"+a:a,"\n                        ").concat(e>12?"PM":"AM");return{time:s,date:this.getFullDate()}},insertTo:function(t,e,n){t.appendChild(e),t.appendChild(n)}}},F=z(),P={name:"app",data:function(){return{name:null}},firestore:function(){return{chats:H.collection("chats")}},methods:{validate:function(){return F.validate(this.name)},startChat:function(){this.name&&this.validate()?(F.setCookie(this.name),this.$router.push({name:"chat",params:{name:this.name}})):F.Handler("Enter your name before start chating")},deleteAllData:function(){if(!(this.chats.length<=0))return this.chats.map(function(t){H.collection("chats").doc(t[".key"]).delete()}),F.Handler("Data was deleted !",!1);F.Handler("Database is alredy empty")}}},B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",attrs:{id:"app"}},[n("h4",{staticClass:"center  green-text text-darken-1"},[t._v("Welcome")]),n("hr"),n("form",{on:{submit:function(e){e.preventDefault(),t.startChat()}}},[n("div",{staticClass:"input-field"},[n("i",{staticClass:"material-icons prefix"},[t._v("account_circle")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"icon_prefix",attrs:{type:"text",placeholder:"Your name...",name:"name"},domProps:{value:t.name},on:{input:[function(e){e.target.composing||(t.name=e.target.value)},function(e){t.validate()}]}})]),n("input",{staticClass:"btn green lighten-1",attrs:{type:"submit",value:"Ready"}}),this.name&&"robert"==this.name.toLowerCase()?n("input",{staticClass:"btn red lighten-1",attrs:{type:"button",value:"Delete Data"},on:{click:function(e){t.deleteAllData()}}}):t._e()])])},J=[];function W(t){n("HQqO")}var G=!1,L=W,R="data-v-5d745d2c",V=null,Z=Object(r["a"])(P,B,J,G,L,R,V),K=Z.exports,Q={name:"home",components:{StartScreen:K}},X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("start-screen")],1)},tt=[],et=!1,nt=null,at=null,st=null,it=Object(r["a"])(Q,X,tt,et,nt,at,st),rt=it.exports,ot=(n("MfeA"),{props:["name","content"],data:function(){return{text:null}},methods:{scroll:function(){return F.scrollBottom(this.content)},addMessage:function(){var t=/^[a-z\.]\D|\d+?$/i,e={text:this.text,name:this.name,createdAt:F.getNow()};this.text&&t.test(this.text)?(H.collection("chats").add(e),this.scroll(),this.text=""):F.Handler("Invalid Value:Field must not be empty , and can`t start and end with space!")},deleteAllData:function(){var t=H.collection("chats").where("name","==",this.name);t.get().then(function(t){t.forEach(function(t){return t.ref.delete(),F.Handler("Your messages was deleted !",!1)})})}}}),ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{on:{submit:function(e){e.preventDefault(),t.addMessage()}}},[n("div",{staticClass:"input-field btn-group"},[n("i",{staticClass:"material-icons prefix"},[t._v("forum")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{type:"text",placeholder:"Your Message..."},domProps:{value:t.text},on:{focus:t.scroll,input:function(e){e.target.composing||(t.text=e.target.value)}}}),n("div",{staticClass:"btn-group"},[t._m(0),n("button",{staticClass:"delete btn red ",attrs:{type:"button"},on:{click:function(e){t.deleteAllData()}}},[t._v("Delete Your messages\n          "),n("i",{staticClass:"material-icons prefix"},[t._v("delete")])])])])])},lt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"submit btn green ",attrs:{type:"submit"}},[t._v("Send Message\n          "),n("i",{staticClass:"material-icons prefix"},[t._v("send")])])}];function ut(t){n("NImH")}var dt=!1,mt=ut,ft=null,ht=null,pt=Object(r["a"])(ot,ct,lt,dt,mt,ft,ht),vt=pt.exports,gt={props:{name:{type:String},counts:{type:Object}},data:function(){return{isClose:!0,show:!1,newName:null}},methods:{change:function(){this.isClose=!1},close:function(){this.isClose=!0},validate:function(){return F.validate(this.newName)},changeName:function(){var t=this;this.validate()&&this.newName&&H.collection("chats").where("name","==",this.name).get().then(function(e){e.forEach(function(e){e.data().name==t.name&&e.ref.update({name:t.newName})}),F.setCookie(t.newName),location.reload()})}}},Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("div",{staticClass:"btn-group"},[n("button",{staticClass:"btn lighten-1",attrs:{type:"button"},on:{click:t.change}},[n("i",{staticClass:"material-icons prefix",attrs:{title:"Change User Name"}},[t._v("person")]),t._v("\n              Change Name\n          ")]),n("button",{staticClass:"btn indigo lighten-1",attrs:{type:"button"},on:{click:function(e){t.show=!t.show}}},[t._v(" \n                  Chat Info\n                  "),n("i",{staticClass:"material-icons prefix",attrs:{title:"More info"}},[t._v("\n                      "+t._s(t.show?"arrow_drop_up":"arrow_drop_down")+"\n                  ")])])]),n("transition",{attrs:{name:"bounce"}},[t.show?n("div",{staticClass:"chat-info"},[n("ul",[n("li",[n("span",{staticClass:"name-header"},[t._v("Your Name: "),n("strong",[t._v(t._s(t.name))])])]),n("li",[n("span",[t._v("Your Message Count: "),n("strong",[t._v(t._s(t.counts.curentMessage))])])])]),n("ul",[n("li",[n("span",[t._v("All Messages Count: "),n("strong",[t._v(t._s(t.counts.allMessage))])])]),n("li",[n("span",[t._v("Users Count: "),n("strong",[t._v(t._s(t.counts.usersCount))])])])]),n("span",{staticClass:"version"},[t._v("Version:1.5.5")])]):t._e()]),t.isClose?t._e():n("div",{staticClass:"modal_main",style:t.isClose?"display:none":"display:block"},[n("div",{staticClass:"modal_content"},[n("div",{staticClass:"close",on:{click:t.close}},[n("i",{staticClass:"material-icons prefix"},[t._v("close")])]),n("form",{on:{submit:function(e){e.preventDefault(),t.changeName()}}},[n("div",{staticClass:"input-field"},[n("i",{staticClass:"material-icons prefix"},[t._v("person_outline")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newName,expression:"newName"}],attrs:{type:"text",placeholder:"New name..."},domProps:{value:t.newName},on:{input:[function(e){e.target.composing||(t.newName=e.target.value)},t.validate]}}),n("div",{staticClass:"btn-group"},[n("button",{staticClass:"btn submit",attrs:{type:"submit"}},[t._v("Submit")]),n("button",{staticClass:"btn red accent-3",attrs:{type:"button"},on:{click:t.close}},[t._v("Dismiss")])])])])])])],1)},_t=[];function bt(t){n("yMcY")}var xt=!1,wt=bt,yt=null,Nt=null,Mt=Object(r["a"])(gt,Ct,_t,xt,wt,yt,Nt),At=Mt.exports,Dt={components:{NewMessage:vt,ChangeName:At},data:function(){return{name:document.cookie.split("=")[1],chatInfo:{allMessage:0,curentMessage:0,usersCount:0}}},firestore:function(){return{chats:H.collection("chats").orderBy("createdAt")}},methods:{deleteData:function(t){var e=t.target;if("current"==e.classList[0]){var n=e.firstChild.value,a=e.childNodes[2].textContent;H.collection("chats").where("name","==",n).get().then(function(t){t.forEach(function(t){t.data().text==a&&(F.Handler("Your Message was deleted!",!1,2e3),t.ref.delete())})})}}},beforeUpdate:function(){var t=this,e=document.querySelectorAll(".message"),n=/https?:(\/\/)(\w+)\.(\w{2,10})(\.\w{2,10})?\/?/i;e.forEach(function(t){var e=t.textContent.toLowerCase();if(e.match(n)){var a="",s="",i=document.createElement("a");i.setAttribute("target","_blank"),t.textContent="";var r=e.indexOf("h"),o=e.indexOf(" "),c=e.lastIndexOf(" ");return 0==r?-1===o?(a=e,t.appendChild(i)):(a=e.slice(0,o),s=document.createTextNode(e.slice(o)),F.insertTo(t,i,s)):o===c?(a=e.slice(r),s=document.createTextNode(e.slice(0,r)),F.insertTo(t,s,i)):(a=e.slice(o,c),s=document.createTextNode(e.slice(0,o)),F.insertTo(t,s,i),s=document.createTextNode(e.slice(c)),t.appendChild(s)),i.setAttribute("href",a),i.textContent="".concat(a)}}),H.collection("chats").get().then(function(e){var n=[];return e.forEach(function(e){if(e.data().name==t.name)return n.push(t.name)}),t.chatInfo.curentMessage=n.length}),H.collection("chats").get().then(function(e){var n=[];return e.forEach(function(t){return n.push(t.ref.id)}),t.chatInfo.allMessage=n.length}),H.collection("chats").get().then(function(e){var n=[];return e.forEach(function(t){return n.push(t.data().name)}),n=n.filter(function(t,e,n){return n.indexOf(t)==e}),t.chatInfo.usersCount=n.length})}},kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-action"},[n("h4",{staticClass:"center orange-text text-darken-3"},[t._v("Aslanyan`s Chat")]),n("hr"),n("change-name",{attrs:{name:t.name,counts:t.chatInfo}}),n("div",{ref:"content",staticClass:"card-content"},[n("span"),n("ul",{staticClass:"messages"},t._l(t.chats,function(e,a){return n("li",{key:a,class:t.name==e.name?"current delete":"another",on:{click:function(e){return e.target!==e.currentTarget?null:t.deleteData(e)}}},[t.name==e.name?n("input",{attrs:{type:"hidden",name:"hidden_name"},domProps:{value:t.name}}):t._e(),n("span",{staticClass:"name red-text text-darken-2"},[t._v(t._s(t.name==e.name?"You":e.name))]),n("p",{staticClass:"message aqua-text"},[t._v(t._s(e.text))]),n("span",{staticClass:"time cyan-text lighten-4"},[t._v(t._s(e.createdAt.time))]),n("span",{staticClass:"date cyan-text lighten-4"},[t._v(t._s(e.createdAt.date))])])}))]),n("new-message",{attrs:{name:t.name,content:this.$refs["content"]}})],1)])])},Et=[];function Ot(t){n("FakA")}var St=!1,Tt=Ot,Ht="data-v-3b02b1a2",It=null,jt=Object(r["a"])(Dt,kt,Et,St,Tt,Ht,It),$t=jt.exports;a["a"].use(M["a"]);var Yt=new M["a"]({mode:"history",routes:[{path:"/",name:"main",component:rt},{path:"/chat",name:"chat",component:$t,props:!0,beforeEnter:function(t,e,n){var a=document.cookie.split("=")[1],s=t.params.name;return s=a,s?n():n({path:"/"})}}]});a["a"].config.productionTip=!1,new a["a"]({router:Yt,render:function(t){return t(N)}}).$mount("#app")},NImH:function(t,e){},osJZ:function(t,e){},yMcY:function(t,e){}},[0]);
//# sourceMappingURL=app.1dd11b26.js.map