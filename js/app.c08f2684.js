webpackJsonp([1],{0:function(t,e,n){t.exports=n("NHnr")},"52zn":function(t,e,n){t.exports="img/am.2c8f522e.jpg"},"5qEl":function(t,e,n){t.exports="img/geo.f6c47d7f.jpg"},G3BA:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("/5sW"),s=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"card center"},[a("div",{staticClass:"row"},[a("div",{staticClass:"arm"},[a("img",{attrs:{src:n("52zn"),alt:"Armenian`s rull",title:"Лучшая нация"}})]),a("div",{staticClass:"text-content"},[a("h5",[t._v("Who Wins ?")])]),a("div",{staticClass:"geo"},[a("img",{attrs:{src:n("5qEl"),alt:"Georgian`s Suck",title:"Худшая нация"}})])]),a("div",{staticClass:"info"},[a("h6",[t._v("Created and Powerd  By Robert Aslanyan , jsut for fun and for testing some feauters")])])])}],i=n("XyMi");function c(t){n("osJZ")}var o=null,l=!1,u=c,d="data-v-6c5d46a3",m=null,f=Object(i["a"])(o,s,r,l,u,d,m),h=f.exports,p={components:{"app-header":h}},v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("app-header"),n("router-view")],1)},g=[];function x(t){n("G3BA")}var C=!1,_=x,b=null,w=null,y=Object(i["a"])(p,v,g,C,_,b,w),A=y.exports,D=(n("EuXz"),n("mJx5"),n("/ocq")),E=n("Sazm"),k=n.n(E),H=(n("3VHS"),n("wmKo")),M=n.n(H);a["a"].use(M.a);var S={apiKey:"AIzaSyCWwvlnk2RIlWDCh5c0O82Ds9ZytUsO2Pw",authDomain:"vue-chat-97b23.firebaseapp.com",databaseURL:"https://vue-chat-97b23.firebaseio.com",projectId:"vue-chat-97b23",storageBucket:"vue-chat-97b23.appspot.com",messagingSenderId:"1084147621171"};k.a.initializeApp(S);var $=k.a.firestore(),j={timestampsInSnapshots:!0};$.settings(j);var N=k.a.firestore();n("MfeA");function I(t,e){var n=document.createElement(t);return e&&(n.className=e),n}function O(t){return document.querySelector(t)}function P(t){return void 0==t}var z=function(){return{Handler:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2500,a=O(".error")||O(".success")?a:I("div",e?"error":"success");if(!P(a)){a.textContent=t;var s=O('input[type="text"]');return s.insertAdjacentElement("afterend",a),setTimeout(function(){return a.remove()},n)}},scrollBottom:function(t){if(!P(t)&&!P(t.scrollHeight)&&!P(t.clientHeight))return t.scrollTop=t.scrollHeight},setCookie:function(t){var e=new Date;e.setTime(e.getTime()+864e3),document.cookie="name=".concat(t,";path=/;expires=").concat(e.toGMTString())},validate:function(t){var e=/^([a-z]{4,16})$/i;return!!e.test(t)||(this.Handler("Inavlid name. Name can contain only letters with min 4 and  max 16 length",!0,1e3),!1)},getNow:function(){var t=new Date,e=t.getHours(),n=t.getMinutes(),a=t.getSeconds(),s=t.getDay(),r=t.getMonth(),i=t.getFullYear();s=s<10?"0"+s:s,r=r<10?"0"+r:r;var c="".concat(e,":").concat(n<10?"0"+n:n,":").concat(a<10?"0"+a:a,"\n                        ").concat(e>12?"PM":"AM"),o="".concat(s,"/").concat(r,"/").concat(i);return{time:c,date:o}},isLink:function(t){var e=/^https?:(\/\/)(\w+)\.(\w{2,10})(\.\w{2,10})?\//;if(t.match(e)){var n=I("a");return n.setAttribute("href",t),n.textContent=t,n}}}},B=z(),T={name:"app",data:function(){return{name:null}},firestore:function(){return{chats:N.collection("chats")}},methods:{validate:function(){return B.validate(this.name)},startChat:function(){this.name&&this.validate()?(B.setCookie(this.name),this.$router.push({name:"chat",params:{name:this.name}})):B.Handler("Enter your name before start chating")},deleteAllData:function(){if(!(this.chats.length<=0))return this.chats.map(function(t){N.collection("chats").doc(t[".key"]).delete()}),B.Handler("Data was deleted !",!1);B.Handler("Database is alredy empty")}}},Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",attrs:{id:"app"}},[n("h4",{staticClass:"center  green-text text-darken-1"},[t._v("Welcome")]),n("hr"),n("form",{on:{submit:function(e){e.preventDefault(),t.startChat()}}},[n("div",{staticClass:"input-field"},[n("i",{staticClass:"material-icons prefix"},[t._v("account_circle")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"icon_prefix",attrs:{type:"text",placeholder:"Your name...",name:"name"},domProps:{value:t.name},on:{input:[function(e){e.target.composing||(t.name=e.target.value)},function(e){t.validate()}]}})]),n("input",{staticClass:"btn green lighten-1",attrs:{type:"submit",value:"Ready"}}),this.name&&"robert"==this.name.toLowerCase()?n("input",{staticClass:"btn red lighten-1",attrs:{type:"button",value:"Delete Data"},on:{click:function(e){t.deleteAllData()}}}):t._e()])])},q=[];function F(t){n("wwFv")}var W=!1,G=F,J="data-v-770370dc",L=null,R=Object(i["a"])(T,Y,q,W,G,J,L),Z=R.exports,K={name:"home",components:{StartScreen:Z}},U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("start-screen")],1)},V=[],X=!1,Q=null,tt=null,et=null,nt=Object(i["a"])(K,U,V,X,Q,tt,et),at=nt.exports,st={props:["name","content"],data:function(){return{text:null}},methods:{scroll:function(){return B.scrollBottom(this.content)},addMessage:function(){var t=/^[a-z\.]\D|\d+?$/i,e={text:this.text,name:this.name,createdAt:B.getNow()};this.text&&t.test(this.text)?(N.collection("chats").add(e),this.scroll(),this.text=""):B.Handler("Invalid Value:Field must not be empty , and can`t start and end with space!")},deleteAllData:function(){var t=N.collection("chats").where("name","==",this.name);t.get().then(function(t){t.forEach(function(t){return t.ref.delete(),B.Handler("Your messages was deleted !",!1)})})}}},rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{on:{submit:function(e){e.preventDefault(),t.addMessage()}}},[n("div",{staticClass:"input-field btn-group"},[n("i",{staticClass:"material-icons prefix"},[t._v("forum")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{type:"text",placeholder:"Your Message..."},domProps:{value:t.text},on:{focus:t.scroll,input:function(e){e.target.composing||(t.text=e.target.value)}}}),n("div",{staticClass:"btn-group"},[t._m(0),n("button",{staticClass:"delete btn red ",attrs:{type:"button"},on:{click:function(e){t.deleteAllData()}}},[t._v("Delete Your messages\n          "),n("i",{staticClass:"material-icons prefix"},[t._v("delete")])])])])])},it=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"submit btn green ",attrs:{type:"submit"}},[t._v("Send Message\n          "),n("i",{staticClass:"material-icons prefix"},[t._v("send")])])}];function ct(t){n("NImH")}var ot=!1,lt=ct,ut=null,dt=null,mt=Object(i["a"])(st,rt,it,ot,lt,ut,dt),ft=mt.exports,ht={components:{NewMessage:ft},data:function(){return{name:document.cookie.split("=")[1]}},firestore:function(){return{chats:N.collection("chats").orderBy("createdAt")}},methods:{deleteData:function(t){var e=t.target;if("current"==e.classList[0]){var n=e.firstChild.value,a=e.childNodes[2].textContent;N.collection("chats").where("name","==",n).get().then(function(t){t.forEach(function(t){t.data().text==a&&(B.Handler("Your Message was deleted!",!1,2e3),t.ref.delete())})})}},change:function(t){console.log(t)}},updated:function(){var t=document.querySelectorAll(".message"),e=/^https?:(\/\/)(\w+)\.(\w{2,10})(\.\w{2,10})?\//;t.forEach(function(t){var n=t.textContent;if(n.match(e)){t.textContent="";var a=document.createElement("a");return a.setAttribute("href",n),a.setAttribute("target","_blank"),a.textContent=n,t.appendChild(a)}})}},pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-action"},[n("h4",{staticClass:"center orange-text text-darken-3"},[t._v("Aslanyan`s Chat v1.3")]),n("hr"),n("div",{ref:"content",staticClass:"card-content"},[n("span"),n("ul",{staticClass:"messages"},t._l(t.chats,function(e){return n("li",{class:t.name==e.name?"current delete":"another",on:{click:function(e){return e.target!==e.currentTarget?null:t.deleteData(e)}}},[t.name==e.name?n("input",{attrs:{type:"hidden",name:"hidden_name"},domProps:{value:t.name}}):t._e(),n("span",{staticClass:"name red-text text-darken-2"},[t._v(t._s(t.name==e.name?"You":e.name))]),n("p",{staticClass:"message aqua-text",on:{load:t.change}},[t._v(t._s(e.text))]),n("span",{staticClass:"time cyan-text lighten-4"},[t._v(t._s(e.createdAt.time))]),n("span",{staticClass:"date cyan-text lighten-4"},[t._v(t._s(e.createdAt.date))])])}))]),n("new-message",{attrs:{name:t.name,content:this.$refs["content"]}})],1)])])},vt=[];function gt(t){n("dhFP")}var xt=!1,Ct=gt,_t="data-v-6274cdee",bt=null,wt=Object(i["a"])(ht,pt,vt,xt,Ct,_t,bt),yt=wt.exports;a["a"].use(D["a"]);var At=new D["a"]({mode:"history",routes:[{path:"/",name:"main",component:at},{path:"/chat",name:"chat",component:yt,props:!0,beforeEnter:function(t,e,n){var a=document.cookie.split("=")[1],s=t.params.name;return s=a,s?n():n({path:"/"})}}]});a["a"].config.productionTip=!1,new a["a"]({router:At,render:function(t){return t(A)}}).$mount("#app")},NImH:function(t,e){},dhFP:function(t,e){},osJZ:function(t,e){},wwFv:function(t,e){}},[0]);
//# sourceMappingURL=app.c08f2684.js.map